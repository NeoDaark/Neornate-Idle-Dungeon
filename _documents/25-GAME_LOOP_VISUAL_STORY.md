# ğŸ¬ Game Loop: Visual Story

How the game loop brings everything to life, step by step.

---

## ACT 1: THE AWAKENING (App Opens)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     App.vue loaded                          â”‚
â”‚                    onMounted hook                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ 1ï¸âƒ£ Load from storage
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  gameStore.initializeGame()      â”‚
        â”‚  â”œâ”€ playerStore.load()           â”‚
        â”‚  â”œâ”€ inventoryStore.load()        â”‚
        â”‚  â”œâ”€ skillsStore.load()           â”‚
        â”‚  â”‚  â””â”€ skillState.cycleEndTime   â”‚ â† Restored!
        â”‚  â””â”€ marketStore.load()           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ 2ï¸âƒ£ Simulate loading delay
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ setTimeout(3s)  â”‚ â³ 3 seconds
                    â”‚                 â”‚
                    â”‚  (user sees     â”‚
                    â”‚   loading bar)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ 3ï¸âƒ£ Process offline progress
                             â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  gameStore.calculateOfflineProgress()            â”‚
        â”‚                                                  â”‚
        â”‚  If app was closed 10 minutes:                   â”‚
        â”‚  â”œâ”€ Loop through all active skills               â”‚
        â”‚  â”œâ”€ For each: calculate cycles completed         â”‚
        â”‚  â”œâ”€ Execute multiple completeCycle() in loop     â”‚
        â”‚  â”œâ”€ +120 items, +1200 XP! âœ“                      â”‚
        â”‚  â””â”€ offlineHarvestSummary populated              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ 4ï¸âƒ£ Show UI
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ isLoading=false â”‚
                    â”‚                 â”‚
                    â”‚  Layout visible â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ 5ï¸âƒ£ Show offline notification
                             â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ OfflineHarvestNotification:   â”‚
            â”‚ "You harvested while away!"   â”‚
            â”‚ "120 cycles completed"        â”‚
            â”‚ "+120 items, +1200 XP"        â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ 6ï¸âƒ£ Start active game loop
                             â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚         ğŸ® GAME LOOP STARTS HERE         â”‚
            â”‚              (100ms ticks)               â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ACT 2: THE LOOP (Game Running)

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  GAME LOOP ITERATION    â”‚
                    â”‚  (Every 100ms)          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                                             â”‚
            â”‚ Get all ACTIVE skills                       â”‚
            â”‚ (computed filter: isActive === true)        â”‚
            â”‚                                             â”‚
            â”‚ const activeSkills = skillsStore.          â”‚
            â”‚   allSkills.filter(s => s.isActive)        â”‚
            â”‚                                             â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ For each active skill:      â”‚
                    â”‚ SKILL: MINERIA              â”‚
                    â”‚ - isActive: true âœ“          â”‚
                    â”‚ - cycleEndTime: 5000ms      â”‚
                    â”‚ - now: 0ms                  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚ Is now >= cycleEndTime?  â”‚
                      â”‚ Is 0 >= 5000?            â”‚
                      â”‚ NO âŒ                     â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                              [NEXT TICK]
                                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ TICK #50 (t=5000ms)                           â”‚
        â”‚ - now: 5000ms                                 â”‚
        â”‚ - cycleEndTime: 5000ms                        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ Is 5000 >= 5000? YES âœ…
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   skillsStore.completeCycle()       â”‚
        â”‚                                     â”‚
        â”‚   VALIDATIONS:                      â”‚
        â”‚   â”œâ”€ Product exists?        âœ“       â”‚
        â”‚   â”œâ”€ inventoryStore?        âœ“       â”‚
        â”‚   â””â”€ Materials available?   âœ“       â”‚
        â”‚                                     â”‚
        â”‚   PROCESSING:                       â”‚
        â”‚   â”œâ”€ addExperience(10)      âœ“       â”‚
        â”‚   â”œâ”€ consumeMaterials()     âœ“       â”‚
        â”‚   â””â”€ inventoryStore.addItem(1) âœ“   â”‚
        â”‚                                     â”‚
        â”‚   RESULT: { success }       âœ“       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ if (result && skill.isActive)            â”‚
        â”‚ if (true && true) = TRUE âœ…              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ skillsStore.activateSkill() AGAIN          â”‚
        â”‚                                            â”‚
        â”‚ - isActive = true                          â”‚
        â”‚ - cycleEndTime = 5000 + 5000 = 10000ms     â”‚
        â”‚ - currentProduct = product                 â”‚
        â”‚                                            â”‚
        â”‚ â†» SKILL RE-ENTERED ACTIVE LOOP             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                    [NEXT TICK]
                         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ TICK #51 (t=5100ms)          â”‚
        â”‚ Is 5100 >= 10000? NO âŒ      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                    [WAIT 100ms]
                         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ TICK #100 (t=10000ms)                     â”‚
        â”‚ Is 10000 >= 10000? YES âœ…                 â”‚
        â”‚ â†’ completeCycle() AGAIN                   â”‚
        â”‚ â†’ +1 item, +10 XP AGAIN                   â”‚
        â”‚ â†’ cycleEndTime = 15000ms                  â”‚
        â”‚                                           â”‚
        â”‚ [LOOP CONTINUES INDEFINITELY]             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ACT 3: THE AUTO-SAVE (Every 5 Seconds)

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  EVERY 5 SECONDS        â”‚
                    â”‚  (Auto-save timer)      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         gameStore.saveGame()                    â”‚
        â”‚                                                 â”‚
        â”‚ playerStore.saveToLocalStorage()               â”‚
        â”‚ inventoryStore.saveToLocalStorage()            â”‚
        â”‚ skillsStore.saveToLocalStorage()               â”‚
        â”‚   â””â”€ Save skillState.cycleEndTime â­           â”‚
        â”‚       This is CRITICAL for offline!            â”‚
        â”‚ toolsStore.saveToStorage()                     â”‚
        â”‚                                                â”‚
        â”‚ localStorage['neornate_lastActiveTime']        â”‚
        â”‚   = Date.now()                                 â”‚
        â”‚   (timestamp when we save)                     â”‚
        â”‚                                                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ACT 4: THE OFFLINE SCENARIO

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ USER CLOSES APP (or browser tab)                  â”‚
â”‚                                                   â”‚
â”‚ Current state saved:                              â”‚
â”‚ - MINERIA: isActive=true, cycleEndTime=5000ms    â”‚
â”‚ - lastActiveTime = timestamp                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ â±ï¸ [10 MINUTES PASS]
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ USER OPENS APP AGAIN                              â”‚
â”‚                                                   â”‚
â”‚ onMounted executes                                â”‚
â”‚ calculateOfflineProgress() runs                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Calculate time:    â”‚
        â”‚  offlineMs =        â”‚
        â”‚  now - lastActive   â”‚
        â”‚                     â”‚
        â”‚  now = t=600000ms   â”‚
        â”‚  lastActive = t=0   â”‚
        â”‚  offlineMs = 600s   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  For MINERIA (was active):                â”‚
        â”‚                                           â”‚
        â”‚  cycleTime = 5000ms                       â”‚
        â”‚  cycles = 600000 / 5000 = 120 cycles     â”‚
        â”‚                                           â”‚
        â”‚  Execute completeCycle() 120 times:      â”‚
        â”‚  âœ“ Cycle 1: +1 mineral, +10 XP           â”‚
        â”‚  âœ“ Cycle 2: +1 mineral, +10 XP           â”‚
        â”‚  ...                                      â”‚
        â”‚  âœ“ Cycle 120: +1 mineral, +10 XP         â”‚
        â”‚                                           â”‚
        â”‚  TOTAL: +120 minerals, +1200 XP !!!      â”‚
        â”‚                                           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Calculate new cycleEndTime:         â”‚
        â”‚                                    â”‚
        â”‚ timeUsed = 120 * 5000 = 600000ms  â”‚
        â”‚ remaining = 600000 - 600000 = 0   â”‚
        â”‚                                    â”‚
        â”‚ cycleEndTime = now + 0 = now       â”‚
        â”‚ (start new cycle immediately!)    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Save to offlineHarvestSummary:        â”‚
        â”‚  {                                     â”‚
        â”‚    totalOfflineMs: 600000,            â”‚
        â”‚    skillHarvests: [{                 â”‚
        â”‚      skill: 'mineria',               â”‚
        â”‚      cyclesCompleted: 120,          â”‚
        â”‚      totalQuantity: 120,            â”‚
        â”‚      totalXP: 1200                  â”‚
        â”‚    }]                               â”‚
        â”‚  }                                    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Show OfflineHarvestNotification:      â”‚
        â”‚  "â›ï¸ You harvested while away!"        â”‚
        â”‚  "ğŸ¯ 120 cycles completed"            â”‚
        â”‚  "ğŸ“¦ +120 minerales"                   â”‚
        â”‚  "â­ +1200 XP"                         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Game loop starts with:                â”‚
        â”‚  - Inventory updated                   â”‚
        â”‚  - Skills leveled up                   â”‚
        â”‚  - cycleEndTime = now (ready to go)   â”‚
        â”‚                                        â”‚
        â”‚  â†» First game loop will detect:       â”‚
        â”‚  now >= cycleEndTime = NOW >= NOW âœ“  â”‚
        â”‚  â†’ Immediate completeCycle()          â”‚
        â”‚  â†’ Restart cycle                      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ACT 5: THE PAUSE (When Materials Run Out)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Scenario: HERRERÃA requires 10 lingotes            â”‚
â”‚          But inventory only has 5                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ Game loop executes completeCycle()
                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  completeCycle() validation:       â”‚
        â”‚                                   â”‚
        â”‚  for (material of requiredMaterials) {
        â”‚    available = 5                   â”‚
        â”‚    required = 10                   â”‚
        â”‚    if (5 < 10) â†’ TRUE âœ…          â”‚
        â”‚      return null âŒ               â”‚
        â”‚  }                                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ result = null
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  if (result && skill.isActive)     â”‚
        â”‚  if (null && true) = FALSE âŒ      â”‚
        â”‚  â†’ Don't re-activate              â”‚
        â”‚                                    â”‚
        â”‚  else if (!result && skill.isActive)
        â”‚  if (true && true) = TRUE âœ…       â”‚
        â”‚  â†’ Enter this branch               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ deactivateSkill(skill, true)           â”‚
        â”‚   // true = preservar cycleEndTime    â”‚
        â”‚                                        â”‚
        â”‚ skillState.isActive = false âŒ        â”‚
        â”‚ skillState.cycleEndTime = KEEP IT âœ“   â”‚
        â”‚ skillState.currentProduct = KEEP IT âœ“ â”‚
        â”‚                                        â”‚
        â”‚ [REMOVED FROM activeSkills]           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  UI shows PAUSED status:              â”‚
        â”‚  ğŸ”´ HERRERÃA: Paused                  â”‚
        â”‚     "Need: 10 lingotes (have 5)"      â”‚
        â”‚                                        â”‚
        â”‚  User adds 5 more lingotes            â”‚
        â”‚  Now has: 10 lingotes âœ“               â”‚
        â”‚                                        â”‚
        â”‚  User clicks "Resume"                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ activateSkill(HERRERIA, product)      â”‚
        â”‚   // Re-activate                      â”‚
        â”‚                                        â”‚
        â”‚ skillState.isActive = true âœ“          â”‚
        â”‚ cycleEndTime recalculated             â”‚
        â”‚                                        â”‚
        â”‚ [RE-ENTERED activeSkills]             â”‚
        â”‚ â†’ Game loop will process again next   â”‚
        â”‚   time cycleEndTime is reached        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## THE FULL PICTURE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         APP LIFECYCLE                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚               â”‚               â”‚
        OPEN APP         RUNNING APP      CLOSE APP
            â”‚               â”‚               â”‚
            â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Calculate   â”‚  â”‚  Game Loop   â”‚  â”‚  Save Game   â”‚
    â”‚ Offline     â”‚  â”‚  Runs        â”‚  â”‚              â”‚
    â”‚ Cycles      â”‚  â”‚  Every 100ms â”‚  â”‚  Auto-save   â”‚
    â”‚             â”‚  â”‚              â”‚  â”‚  Every 5000msâ”‚
    â”‚ Auto-save   â”‚  â”‚  Auto-save   â”‚  â”‚              â”‚
    â”‚ Every 5s    â”‚  â”‚  Every 5s    â”‚  â”‚  Final save  â”‚
    â”‚             â”‚  â”‚              â”‚  â”‚              â”‚
    â”‚ Users see:  â”‚  â”‚  Users see:  â”‚  â”‚ State saved: â”‚
    â”‚ Notificationâ”‚  â”‚  Real-time   â”‚  â”‚ - Progress  â”‚
    â”‚ of progress â”‚  â”‚  progression â”‚  â”‚ - Inventory â”‚
    â”‚ while away  â”‚  â”‚              â”‚  â”‚ - Timestamp â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚               â”‚               â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                      [REPEAT CYCLE]
```

---

## TIMING OVERVIEW

```
0ms     â”œâ”€ User activates MINERIA
        â”‚
1ms     â”œâ”€ activateSkill() called
        â”‚   â””â”€ cycleEndTime = 5000ms set
        â”‚
5ms     â”œâ”€ Game loop tick #1 (5 ticks per second)
        â”‚   â””â”€ now (5) < cycleEndTime (5000)? Skip
        â”‚
1005ms  â”œâ”€ Game loop tick #11
        â”‚   â””â”€ now (1005) < cycleEndTime (5000)? Skip
        â”‚
5000ms  â”œâ”€ Game loop tick #50 â† CRITICAL TICK
        â”‚   â””â”€ now (5000) >= cycleEndTime (5000)? YES!
        â”‚      â””â”€ completeCycle() executes
        â”‚         â””â”€ +1 mineral, +10 XP
        â”‚         â””â”€ activateSkill() again
        â”‚            â””â”€ cycleEndTime = 10000ms
        â”‚
5005ms  â”œâ”€ Game loop tick #51
        â”‚   â””â”€ now (5005) < cycleEndTime (10000)? Skip
        â”‚
5000ms  â”œâ”€ [Every 5 seconds, Auto-save happens]
        â”‚   â””â”€ Save all state to localStorage
        â”‚      â””â”€ cycleEndTime = SAVED
        â”‚      â””â”€ lastActiveTime = NOW
        â”‚
10000ms â”œâ”€ Game loop tick #100 â† NEXT CRITICAL TICK
        â”‚   â””â”€ now (10000) >= cycleEndTime (10000)? YES!
        â”‚      â””â”€ completeCycle() again
        â”‚         â””â”€ +1 mineral, +10 XP
        â”‚
[CONTINUES INDEFINITELY]
```

---

**This is the heartbeat of the Idle Game.** â¤ï¸ğŸ®

Every 100ms, the loop checks. Every 5 seconds, it saves.  
Every 5 seconds per skill, items appear and XP accumulates.  
When the app closes, the math continues silently.  
When it reopens, **the rewards await.** âš¡

