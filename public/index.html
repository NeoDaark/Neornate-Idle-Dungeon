<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Neornate - Idle Dungeon">
<title>Neornate - Idle Dungeon</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0e0e0e">
<style>
body {
    background:#0e0e0e;
    color:#ddd;
    font-family: monospace;
    padding:10px;
    margin:0;
    overflow-x:hidden;
    height:100vh;
    display:flex;
    flex-direction:column;
    box-sizing:border-box;
}
* {
    box-sizing:border-box;
}
h1,h2 { color:#ffa500; margin:5px 0; }
.panel { border:1px solid #333; padding:8px; margin-bottom:8px; }
button {
    background:#222;
    color:#fff;
    border:1px solid #555;
    padding:5px 8px;
    margin:2px;
    cursor:pointer;
    font-size:14px;
    border-radius: 4px;
    transition: background 0.2s;
}
button:hover { background:#444; }
button:disabled { opacity:0.4; cursor:not-allowed; }
#game { 
    display:flex; 
    flex-direction:column; 
    height:100%;
    overflow:hidden;
}
#game > div:not(.log-container) {
    flex-shrink:0;
}
.log-container {
    flex:1;
    display:flex;
    flex-direction:column;
    overflow:hidden;
    min-height:0;
}
.log { 
    background:#000; 
    flex:1;
    overflow-y:auto; 
    padding:5px; 
    font-size:13px;
}
.log .combat { color:#ff5555 }
.log .loot { color:#55ff55 }
.log .event { color:#55aaff }
.log .death { color:#ff0000 }
.log .rare { color:#c77dff }
.log .xp { color:#55ffff }
.log .success { color:#00ff00; font-weight:bold; }
.log .info { color:#aaaaaa }
.log .success { color:#00ff00; font-weight:bold; }
.log .info { color:#aaaaaa }
.stat { 
    display:flex; 
    justify-content:flex-start;
    margin-bottom:2px; 
    font-family: monospace;
    align-items:center;
}
.stat-name {
    width:60px;
    text-align:left;
}
.stat-values {
    text-align:right;
    min-width:120px;
    font-family: monospace;
}
.stat-base {
    color:#999;
    font-size:12px;
}
.item { border-bottom:1px solid #333; padding:3px 0; font-size:14px; }
.hidden { display:none }

/* ==== EQUIPO TABS ==== */
.equipTab {
    background:#1a1a1a;
    color:#aaa;
    border:1px solid #444;
    padding:6px 10px;
    margin-right:5px;
    margin-bottom:8px;
    cursor:pointer;
    font-size:12px;
    border-radius: 3px;
    transition: all 0.2s;
}
.equipTab:hover {
    background:#2a2a2a;
    color:#fff;
}
.equipTab.active {
    background:#ffa500;
    color:#000;
    border-color:#ffa500;
}

.equipped-in-tab {
    display:flex;
    flex-wrap:wrap;
    gap:5px;
    align-items:center;
}

.equipped-in-tab button {
    flex-shrink:0;
}

/* ==== POPUP STYLES ==== */
#itemPopup {
    display:none;
}

#itemPopup.visible {
    display:flex;
}

/* ==== MOBILE CSS ==== */
@media (max-width:600px){
    body { padding:5px; font-size:14px; }
    .log { font-size:12px; }
    button { padding:4px 6px; font-size:12px; }
    .stat { font-size:13px; }
    .item { font-size:13px; }
    
    .equipTab {
        padding:4px 6px;
        margin-right:3px;
        margin-bottom:5px;
        font-size:11px;
    }
    
    .equipped-in-tab {
        flex-direction:column;
        align-items:flex-start;
    }
    
    .equipped-in-tab button {
        margin-top:3px;
        font-size:11px;
    }
}
</style>
</head>
<body>

<h1>Neornate - Idle Dungeon</h1>

<div id="create" class="panel">
    <h2>Crear personaje</h2>
    <input id="nameInput" placeholder="Nombre del h√©roe">
    <button onclick="createPlayer()">Comenzar</button>
</div>

<div id="game" class="hidden">

<div class="panel">
    <b>Jugador:</b> <span id="pName"></span><br>
    <b>Vida:</b> <span id="hp"></span>/<span id="maxHp"></span><br>
    <b>Nivel:</b> <span id="lvl"></span> |
    <b>XP:</b> <span id="xp"></span><br>
    <b>Mazmorra:</b> <span id="dungeon"></span> |
    <b>Piso:</b> <span id="floor"></span> |
    <b>Encuentro:</b> <span id="encounter"></span>
</div>

<div class="panel">
    <h2>Stats</h2>
    <div id="stats"></div>
</div>

<div class="panel">
    <h2>‚öîÔ∏è Equipo</h2>
    <div id="equipTabs" style="margin-bottom:10px;"></div>
    <div id="inventoryBySlot"></div>
    
    <b>Materiales:</b> <span id="materials"></span>
</div>

<div id="revivePanel" class="panel hidden">
    <h3>üíÄ Has muerto</h3>
    <div id="dungeonSelector"></div>
</div>

<div class="panel">
    <h2>Exploraci√≥n</h2>
    Pr√≥ximo encuentro en: <b><span id="timer">30</span>s</b>
</div>

<div class="panel log-container">
    <h2>Registro</h2>
    <div id="log" class="log"></div>
</div>

<!-- POPUP INFO EQUIPO -->
<div id="itemPopup" style="position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.85); align-items:center; justify-content:center; z-index:1000; padding:10px;">
    <div class="panel" style="max-width:500px; max-height:90vh; overflow-y:auto; margin:auto; background:#1a1a1a; border:2px solid #ffa500;">
        <b id="popupName" style="font-size:16px; color:#ffa500;"></b><br>
        <hr style="border:none; border-top:1px solid #333; margin:8px 0;">
        <span id="popupDesc"></span><br>
        <button onclick="closePopup()" style="margin-top:10px; width:100%;">Cerrar</button>
    </div>
</div>

<!-- POPUP CONFIRMACI√ìN RESET -->
<div id="resetConfirmPopup" style="position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.85); align-items:center; justify-content:center; z-index:1001; padding:10px; display:none;">
    <div class="panel" style="max-width:400px; margin:auto; background:#1a1a1a; border:2px solid #ff5555;">
        <b style="font-size:16px; color:#ff5555;">‚ö†Ô∏è Confirmar Reset</b><br>
        <hr style="border:none; border-top:1px solid #333; margin:12px 0;">
        <p style="color:#aaa; margin:0 0 12px 0;">Esto eliminar√° TODO tu progreso. No se puede deshacer.</p>
        <div style="display:flex; gap:8px; justify-content:flex-end;">
            <button onclick="cancelReset()" style="background:#333; color:#aaa;">Cancelar</button>
            <button onclick="confirmReset()" style="background:#ff5555; color:#fff; font-weight:bold;">Confirmar Reset</button>
        </div>
    </div>
</div>

<!-- CONSOLA MODERNA -->
<div id="customConsole" style="position:fixed; bottom:0; left:0; right:0; background:linear-gradient(180deg, #1a1a1a 0%, #0f0f0f 100%); border-top:1px solid #333; max-height:200px; z-index:999; display:none; flex-direction:column; box-shadow: 0 -4px 12px rgba(0,0,0,0.8);">
    <div id="consoleOutput" style="flex:1; overflow-y:auto; padding:12px; font-family:monospace; font-size:12px; color:#bbb;">
    </div>
    <div style="padding:10px; border-top:1px solid #333; display:flex; gap:8px; align-items:center;">
        <span style="color:#666; font-size:11px;">></span>
        <input id="consoleInput" type="text" placeholder="Comando..." style="flex:1; background:#0a0a0a; color:#fff; border:none; padding:6px 10px; font-family:monospace; font-size:12px; border-radius:2px; outline:none;" onkeypress="handleConsoleInput(event)">
        <span style="color:#666; font-size:10px;">F1 para cerrar</span>
    </div>
</div>

</div>

<script src="game.js"></script>
</body>
</html>
