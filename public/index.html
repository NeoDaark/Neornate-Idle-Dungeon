<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Neornate - Idle Dungeon">
<title>Neornate - Idle Dungeon</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0e0e0e">
<style>
body {
    background:#0e0e0e;
    color:#ddd;
    font-family: monospace;
    padding:10px;
    margin:0;
    overflow-x:hidden;
    min-height:100vh;
    display:flex;
    flex-direction:column;
    box-sizing:border-box;
}
* {
    box-sizing:border-box;
}
h1,h2 { color:#ffa500; margin:5px 0; }
.panel { border:1px solid #333; padding:8px; margin-bottom:8px; }
button {
    background:#222;
    color:#fff;
    border:1px solid #555;
    padding:5px 8px;
    margin:2px;
    cursor:pointer;
    font-size:14px;
    border-radius: 4px;
    transition: background 0.2s;
}
button:hover { background:#444; }
button:disabled { opacity:0.4; cursor:not-allowed; }
#game { 
    display:flex; 
    flex-direction:column; 
    min-height:100%;
    overflow:visible;
}
#game > div:not(.log-container) {
    flex-shrink:0;
}
.log-container {
    flex-shrink:0;
    display:flex;
    flex-direction:column;
    height:auto;
    min-height:200px;
}
.log { 
    background:#000; 
    flex:1;
    overflow-y:auto; 
    padding:5px; 
    font-size:13px;
    min-height:150px;
    max-height:300px;
}
.log .combat { color:#ff5555 }
.log .loot { color:#55ff55 }
.log .event { color:#55aaff }
.log .death { color:#ff0000 }
.log .rare { color:#c77dff }
.log .xp { color:#55ffff }
.log .success { color:#00ff00; font-weight:bold; }
.log .info { color:#aaaaaa }
.log .success { color:#00ff00; font-weight:bold; }
.log .info { color:#aaaaaa }
.stat { 
    display:flex; 
    justify-content:flex-start;
    margin-bottom:2px; 
    font-family: monospace;
    align-items:center;
}
.stat-name {
    width:60px;
    text-align:left;
}
.stat-values {
    text-align:right;
    min-width:120px;
    font-family: monospace;
}
.stat-base {
    color:#999;
    font-size:12px;
}
.item { border-bottom:1px solid #333; padding:3px 0; font-size:14px; }
.hidden { display:none }

/* ==== EQUIPMENT DISPLAY ==== */
.equipment-slot {
    display:flex;
    gap:10px;
    align-items:center;
    padding:10px;
    background:#1a1a1a;
    border:1px solid #333;
    border-radius:4px;
    margin-bottom:8px;
}

.equipment-sprite {
    width:32px;
    height:32px;
    image-rendering:pixelated;
    image-rendering:crisp-edges;
    flex-shrink:0;
}

.equipment-info {
    flex:1;
}

.equipment-name {
    font-weight:bold;
    color:#ffa500;
}

.equipment-stats {
    font-size:12px;
    color:#aaa;
    margin-top:3px;
}

/* ==== EQUIPO TABS ==== */
.equipTab {
    background:#1a1a1a;
    color:#aaa;
    border:1px solid #444;
    padding:6px 10px;
    margin-right:5px;
    margin-bottom:8px;
    cursor:pointer;
    font-size:12px;
    border-radius: 3px;
    transition: all 0.2s;
}
.equipTab:hover {
    background:#2a2a2a;
    color:#fff;
}
.equipTab.active {
    background:#ffa500;
    color:#000;
    border-color:#ffa500;
}

.equipped-in-tab {
    display:flex;
    flex-wrap:wrap;
    gap:5px;
    align-items:center;
}

.equipped-in-tab button {
    flex-shrink:0;
}

/* ==== NAVIGATION TABS ==== */
.nav-bar {
    display:flex;
    gap:10px;
    position:fixed;
    bottom:0;
    left:0;
    right:0;
    background:#1a1a1a;
    border-top:1px solid #333;
    z-index:100;
    padding:8px;
    justify-content:center;
}

.nav-bar.hidden {
    display:none;
}

.nav-button {
    background:#222;
    color:#aaa;
    border:1px solid #444;
    padding:10px 15px;
    cursor:pointer;
    border-radius:4px;
    font-size:12px;
    transition:all 0.2s;
    flex:1;
    max-width:100px;
    text-align:center;
}

.nav-button:hover {
    background:#333;
    color:#fff;
    border-color:#555;
}

.nav-button.active {
    background:#ffa500;
    color:#000;
    border-color:#ffa500;
    font-weight:bold;
}

[data-tab] {
    padding-bottom:80px;
}

[data-tab].hidden {
    display:none;
}

.class-btn {
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    padding:15px 10px !important;
    font-size:14px;
    background:#1a1a1a !important;
    border:2px solid #444 !important;
    transition:all 0.3s;
}

.class-btn:hover {
    background:#2a2a2a !important;
    border-color:#666 !important;
}

.class-btn.active {
    background:#ffa500 !important;
    color:#000 !important;
    border-color:#ffa500 !important;
    font-weight:bold;
}

.class-btn.active span {
    color:#000;
}

/* ==== POPUP STYLES ==== */
#itemPopup {
    display:none;
}

#itemPopup.visible {
    display:flex;
}

/* ==== MOBILE CSS ==== */
@media (max-width:600px){
    body { padding:5px; font-size:14px; }
    .log { font-size:12px; }
    button { padding:4px 6px; font-size:12px; }
    .stat { font-size:13px; }
    .item { font-size:13px; }
    
    .equipTab {
        padding:4px 6px;
        margin-right:3px;
        margin-bottom:5px;
        font-size:11px;
    }
    
    .equipped-in-tab {
        flex-direction:column;
        align-items:flex-start;
    }
    
    .equipped-in-tab button {
        margin-top:3px;
        font-size:11px;
    }
}
</style>
</head>
<body>

<div id="loadingScreen" style="position:fixed; top:0; left:0; right:0; bottom:0; background:#0e0e0e; display:flex; flex-direction:column; align-items:center; justify-content:center; z-index:9999; gap:20px;">
    <h1 style="color:#ffa500; margin:0; font-size:32px;">Neornate</h1>
    <div style="font-size:18px; color:#aaa;">Idle Dungeon</div>
    <div style="width:200px; height:3px; background:#333; border-radius:2px; overflow:hidden;">
        <div style="width:0%; height:100%; background:#ffa500; animation:loading 2s infinite;"></div>
    </div>
    <style>
        @keyframes loading {
            0% { width:0%; }
            50% { width:100%; }
            100% { width:0%; }
        }
    </style>
</div>

<h1>Neornate - Idle Dungeon</h1>

<div id="create" class="panel">
    <h2>Crear personaje</h2>
    <input id="nameInput" placeholder="Nombre del h√©roe" style="width:100%; padding:8px; margin-bottom:10px; background:#1a1a1a; color:#fff; border:1px solid #444; border-radius:4px;">
    
    <h3>Selecciona tu clase:</h3>
    <div style="display:flex; gap:10px; margin-bottom:15px;">
        <button onclick="selectClass('Warrior')" class="class-btn" data-class="Warrior" style="flex:1;">
            ‚öîÔ∏è Guerrero<br>
            <span style="font-size:11px; color:#aaa;">Fuerza +2</span>
        </button>
        <button onclick="selectClass('Thief')" class="class-btn" data-class="Thief" style="flex:1;">
            üó°Ô∏è Ladr√≥n<br>
            <span style="font-size:11px; color:#aaa;">Destreza +2</span>
        </button>
        <button onclick="selectClass('Mage')" class="class-btn" data-class="Mage" style="flex:1;">
            üîÆ Mago<br>
            <span style="font-size:11px; color:#aaa;">Inteligencia +2</span>
        </button>
    </div>
    
    <span id="selectedClass" style="color:#aaa;">Selecciona una clase para comenzar</span>
    <button id="startBtn" onclick="createPlayer()" disabled style="width:100%; margin-top:10px; padding:10px;">Comenzar</button>
</div>

<div id="game" class="hidden">

<!-- TAB: HOME -->
<div data-tab="home" class="hidden">
    <div class="panel">
        <b>Jugador:</b> <span id="pName"></span><br>
        <b>Vida:</b> <span id="hp"></span>/<span id="maxHp"></span><br>
        <b>Nivel:</b> <span id="lvl"></span> |
        <b>XP:</b> <span id="xp"></span> / <span id="xpNeeded"></span><br>
        <b>Trabajo Actual:</b> <span id="currentJob"></span>
    </div>

    <div class="panel">
        <h2>Stats</h2>
        <div id="stats"></div>
    </div>

    <div id="revivePanel" class="panel hidden">
        <h3>üíÄ Has muerto</h3>
        <div id="dungeonSelector"></div>
    </div>
</div>

<!-- TAB: INVENTORY -->
<div data-tab="equipment" class="hidden">
    <div class="panel">
        <h2>üéí Inventario</h2>
        
        <div style="margin-bottom:15px; padding:10px; background:#1a1a1a; border-radius:4px; border-left:3px solid #ffa500;">
            <div style="display:flex; justify-content:space-between; margin-bottom:8px;">
                <span><b>üí∞ Dinero:</b> <span id="playerMoney" style="color:#ffa500;">0</span></span>
                <span><b>üì¶ Materiales:</b> <span id="playerMaterials" style="color:#55ff55;">0</span></span>
            </div>
        </div>

        <h3 style="margin-top:15px; border-bottom:1px solid #333; padding-bottom:8px;">‚öîÔ∏è Equipo Equipado</h3>
        <div id="equipment" style="margin-bottom:15px;"></div>

        <h3 style="margin-top:15px; border-bottom:1px solid #333; padding-bottom:8px;">üì¶ Productos y Materiales</h3>
        <div id="inventory"></div>
    </div>
</div>

<!-- TAB: GUILD -->
<div data-tab="guild" class="hidden">
    <div class="panel">
        <h2>üèõÔ∏è Gremio</h2>
        <p style="color:#aaa;">Sistema de Tiers - Pr√≥ximamente</p>
    </div>
</div>

<!-- TAB: SHOP -->
<div data-tab="shop" class="hidden">
    <div class="panel">
        <h2>üè™ Tienda</h2>
        <p style="color:#aaa;">Sistema de Tienda - Pr√≥ximamente</p>
    </div>
</div>

<!-- TAB: JOBS -->
<div data-tab="jobs" class="hidden">
    <div class="panel">
        <h2>üíº Trabajos</h2>
        <div id="currentJobDisplay" style="margin-bottom:15px; padding:10px; background:#1a1a1a; border-radius:4px; display:none;">
            <div style="font-size:14px; margin-bottom:8px;">
                Trabajo actual: <b id="currentJobName"></b>
            </div>
            <div style="background:#0e0e0e; border:1px solid #333; border-radius:3px; overflow:hidden; height:20px; margin-bottom:8px;">
                <div id="jobProgressBar" style="background:#ffa500; height:100%; width:0%; transition:width 0.1s;"></div>
            </div>
            <div style="display:flex; gap:5px;">
                <span id="jobTimeLeft" style="flex:1; text-align:center;"></span>
                <button onclick="cancelJob()" style="flex:1; padding:6px; font-size:11px; background:#ff5555; color:#fff;">‚ùå Cancelar</button>
            </div>
        </div>
        
        <div id="jobsList" style="display:grid; gap:10px;"></div>
    </div>
</div>

<!-- TAB: DUNGEONS -->
<div data-tab="dungeons" class="hidden">
    <div class="panel">
        <h2>üó∫Ô∏è Mazmorras</h2>
        <p style="color:#aaa;">Mazmorras Desbloqueadas</p>
        <div id="dungeonList"></div>
    </div>
</div>

<!-- TAB: PREMIUM -->
<div data-tab="premium" class="hidden">
    <div class="panel">
        <h2>üëë Premium</h2>
        <p style="color:#aaa;">Sistema Premium - Pr√≥ximamente</p>
    </div>
</div>
<div data-tab="log" class="hidden">
    <div class="panel log-container">
        <h2>Registro</h2>
        <div id="log" class="log"></div>
    </div>
</div>

<!-- NAVIGATION BAR -->
<div class="nav-bar hidden">
    <button class="nav-button" data-nav="home">üè† Inicio</button>
    <button class="nav-button" data-nav="equipment">üéí Inventario</button>
    <button class="nav-button" data-nav="guild">üèõÔ∏è Gremio</button>
    <button class="nav-button" data-nav="shop">üè™ Tienda</button>
    <button class="nav-button" data-nav="jobs">üíº Trabajos</button>
    <button class="nav-button" data-nav="dungeons">üó∫Ô∏è Mazmorras</button>
    <button class="nav-button" data-nav="premium">üëë Premium</button>
</div>

</div>

<!-- POPUP INFO EQUIPO -->
<div id="itemPopup" style="position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.85); align-items:center; justify-content:center; z-index:1000; padding:10px;">
    <div class="panel" style="max-width:500px; max-height:90vh; overflow-y:auto; margin:auto; background:#1a1a1a; border:2px solid #ffa500;">
        <b id="popupName" style="font-size:16px; color:#ffa500;"></b><br>
        <hr style="border:none; border-top:1px solid #333; margin:8px 0;">
        <span id="popupDesc"></span><br>
        <button onclick="closePopup()" style="margin-top:10px; width:100%;">Cerrar</button>
    </div>
</div>

<!-- POPUP CONFIRMACI√ìN RESET -->
<div id="resetConfirmPopup" style="position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.85); align-items:center; justify-content:center; z-index:1001; padding:10px; display:none;">
    <div class="panel" style="max-width:400px; margin:auto; background:#1a1a1a; border:2px solid #ff5555;">
        <b style="font-size:16px; color:#ff5555;">‚ö†Ô∏è Confirmar Reset</b><br>
        <hr style="border:none; border-top:1px solid #333; margin:12px 0;">
        <p style="color:#aaa; margin:0 0 12px 0;">Esto eliminar√° TODO tu progreso. No se puede deshacer.</p>
        <div style="display:flex; gap:8px; justify-content:flex-end;">
            <button onclick="cancelReset()" style="background:#333; color:#aaa;">Cancelar</button>
            <button onclick="confirmReset()" style="background:#ff5555; color:#fff; font-weight:bold;">Confirmar Reset</button>
        </div>
    </div>
</div>

<!-- CONSOLA MODERNA -->
<div id="customConsole" style="position:fixed; bottom:0; left:0; right:0; background:linear-gradient(180deg, #1a1a1a 0%, #0f0f0f 100%); border-top:1px solid #333; max-height:200px; z-index:999; display:none; flex-direction:column; box-shadow: 0 -4px 12px rgba(0,0,0,0.8);">
    <div id="consoleOutput" style="flex:1; overflow-y:auto; padding:12px; font-family:monospace; font-size:12px; color:#bbb;">
    </div>
    <div style="padding:10px; border-top:1px solid #333; display:flex; gap:8px; align-items:center;">
        <span style="color:#666; font-size:11px;">></span>
        <input id="consoleInput" type="text" placeholder="Comando..." style="flex:1; background:#0a0a0a; color:#fff; border:none; padding:6px 10px; font-family:monospace; font-size:12px; border-radius:2px; outline:none;" onkeypress="handleConsoleInput(event)">
        <span style="color:#666; font-size:10px;">F1 para cerrar</span>
    </div>
</div>

</div>

<script type="module" src="game-new.js"></script>
</body>
</html>
